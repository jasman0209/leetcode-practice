class Solution {
public:
    vector<vector<int>> matrixBlockSum(vector<vector<int>>& mat, int k) {
        
        int n=mat.size();
       
        vector<vector<int>> output;
        
        for(int i=0;i<mat.size();i++)
        {
            
            int lbi=max(i-k,0);
            int ubi=min(i+k,n-1);
            vector<int> v;
            for(int j=0;j<mat[i].size();j++)
            {
                int lbj=max(j-k,0);
                int m=mat[i].size()-1;
                int ubj=min(j+k,m);
                long ansf=0;
                for(int r=lbi;r<=ubi;r++)
                {
                    
                        int ans=0;
                        for(int c=lbj;c<=ubj;c++)
                        {
                            ans+=mat[r][c];
                        }
                    
                  
                    ansf+=ans;
                }
                v.push_back(ansf);
            }
           output.push_back(v); 
        }
        return output;
    }
};
